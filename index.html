<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Formation à l'ECG - La Défense Belge</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
            margin: 0;
        }
        h1, h2, h3 {
            color: #333;
        }
        form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            max-width: 1200px;
            margin: 0 auto;
        }
        label {
            display: block;
            margin-top: 12px;
            font-weight: bold;
        }
        input[type="text"], textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        textarea {
            min-height: 80px;
        }
        #personal-info {
            display: flex;
            gap: 20px;
        }
        #personal-info div {
            flex: 1;
        }
        #container {
            display: flex;
            margin-top: 25px;
            gap: 25px;
        }
        #electrodes {
            width: 140px;
            background: #f0f0f0;
            padding: 12px;
            border-radius: 6px;
            flex-shrink: 0;
        }
        .electrode {
            color: white;
            margin: 8px 0;
            text-align: center;
            cursor: grab;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            line-height: 24px;
            font-size: 10px;
            font-weight: bold;
            user-select: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        #ra { background: red; }
        #la { background: yellow; color: black; }
        #rl { background: black; }
        #ll { background: green; }
        #v1 { background: red; }
        #v2 { background: yellow; color: black; }
        #v3 { background: green; }
        #v4 { background: brown; }
        #v5 { background: black; }
        #v6 { background: purple; }
        #v7 { background: orange; }
        #v8 { background: white; color: black; }
        #v9 { background: grey; }
        #mannequin-container {
            position: relative;
            border: 1px solid #ccc;
            border-radius: 6px;
            overflow: hidden;
            flex: 1;
            max-width: 1000px;
        }
        #mannequin {
            width: 100%;
            height: auto;
            display: block;
        }
        .ecg-tracing {
            margin: 30px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fafafa;
        }
        .ecg-tracing img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        button {
            background: #28a745;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            margin-top: 30px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #218838;
        }
    </style>
</head>
<body>

    <h1>Formation à l'ECG (Électrocardiogramme) - La Défense Belge</h1>

    <form id="ecgForm">
        <h2>Informations personnelles</h2>
        <div id="personal-info">
            <div>
                <label>Nom</label>
                <input type="text" name="nom" required>
            </div>
            <div>
                <label>Prénom</label>
                <input type="text" name="prenom" required>
            </div>
        </div>

        <h2>Questions théoriques sur les ondes ECG</h2>
        
        <label>1. Que représente l'onde P ?</label>
        <input type="text" name="q1" required>

        <label>2. Que représente le complexe QRS ?</label>
        <input type="text" name="q2" required>

        <label>3. Que représente l'onde T ?</label>
        <input type="text" name="q3" required>

        <label>4. Quelle est la signification de l'intervalle PR ?</label>
        <input type="text" name="q4" required>

        <label>5. Qu'est-ce que le segment ST et pourquoi est-il important ?</label>
        <input type="text" name="q5" required>

        <h2>Simulation de placement des électrodes ECG</h2>
        <p>Glissez-déposez les électrodes aux emplacements corrects en suivant les codes couleurs standards.</p>

        <div id="container">
            <div id="electrodes">
                <div class="electrode" id="ra" draggable="true">RA</div>
                <div class="electrode" id="la" draggable="true">LA</div>
                <div class="electrode" id="rl" draggable="true">RL</div>
                <div class="electrode" id="ll" draggable="true">LL</div>
                <div class="electrode" id="v1" draggable="true">V1</div>
                <div class="electrode" id="v2" draggable="true">V2</div>
                <div class="electrode" id="v3" draggable="true">V3</div>
                <div class="electrode" id="v4" draggable="true">V4</div>
                <div class="electrode" id="v5" draggable="true">V5</div>
                <div class="electrode" id="v6" draggable="true">V6</div>
                <div class="electrode" id="v7" draggable="true">V7</div>
                <div class="electrode" id="v8" draggable="true">V8</div>
                <div class="electrode" id="v9" draggable="true">V9</div>
            </div>

            <div id="mannequin-container" ondrop="drop(event)" ondragover="allowDrop(event)">
                <img src="https://i.imgur.com/n6aXhGW.jpeg" id="mannequin" alt="Mannequin ECG antérieur / postérieur">
            </div>
        </div>

        <h2>Reconnaissance des ondes et tracés ECG</h2>
        <p>Regardez les tracés suivants et répondez aux questions. Indiquez ce que représente chaque anomalie et pourquoi le tracé n'est pas normal (comparé à un ECG normal).</p>

        <div class="ecg-tracing">
            <h3>Tracé 1 : ECG normal (rythme sinusal)</h3>
            <img src="https://cardiovasc.fr/wp-content/uploads/2016/08/sinus-rhythm-ecg-ekg-criteria.jpg" alt="ECG normal">
            <label>Pourquoi ce tracé est-il normal ?</label>
            <textarea name="normal_why" required placeholder="Ex. : ondes P positives, PR normal, QRS fin, ST isoélectrique, T positives..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 2 : Sus-décalage du segment ST (STEMI antérieur)</h3>
            <img src="https://www.e-cardiogram.com/wp-content/uploads/2019/11/Stemi-anterieur-V1V5-Pardee-ecg-taboulet-vxqLOX9w-1200x900.jpg" alt="ST elevation infarctus">
            <label>Que signifie cette anomalie ?</label>
            <input type="text" name="st_elevation_meaning" required placeholder="Ex. : infarctus du myocarde aigu">
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="st_elevation_why_abnormal" required placeholder="Ex. : ST surélevé >1 mm dans plusieurs dérivations..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 3 : Sous-décalage du segment ST (ischémie sous-endocardique)</h3>
            <img src="https://litfl.com/wp-content/uploads/2021/03/ECG-SA-flag-OMI-STEMI.png" alt="ST depression ischémie">
            <label>Que signifie cette anomalie ?</label>
            <input type="text" name="st_depression_meaning" required placeholder="Ex. : ischémie myocardique, angor">
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="st_depression_why_abnormal" required placeholder="Ex. : ST sous-décalé horizontal ou descendant..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 4 : Inversion de l'onde T</h3>
            <img src="https://www.e-cardiogram.com/wp-content/uploads/2019/11/Onde-T-inversee-negative-6-exemples-ECG-Taboulet-1200x900.jpg" alt="T inversion">
            <label>Que peut signifier cette anomalie ? (donnez au moins 2 causes possibles)</label>
            <textarea name="t_inversion_meaning" required placeholder="Ex. : ischémie, hypertrophie ventriculaire, hypokaliémie..."></textarea>
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="t_inversion_why_abnormal" required placeholder="Ex. : onde T inversée là où elle devrait être positive..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 5 : Ondes T pointues / amples (hyperkaliémie)</h3>
            <img src="https://www.e-cardiogram.com/wp-content/uploads/2019/11/Ondes-T-amples-Hyperkalie%CC%81mie-Tm2a31.jpg" alt="Peaked T hyperkaliémie">
            <label>Que signifie cette anomalie ?</label>
            <input type="text" name="peaked_t_meaning" required placeholder="Ex. : hyperkaliémie sévère">
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="peaked_t_why_abnormal" required placeholder="Ex. : ondes T très hautes, pointues, symétriques..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 6 : Ondes T plates + ondes U (hypokaliémie)</h3>
            <img src="https://www.e-cardiogram.com/wp-content/uploads/2023/04/Hypokaliemie-2-moderee-2.1-onde-U-tres-visible-ECG-taboulet-sls-Tm1a8ter.jpg" alt="Hypokaliémie U waves">
            <label>Que signifie cette anomalie ?</label>
            <input type="text" name="u_wave_meaning" required placeholder="Ex. : hypokaliémie">
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="u_wave_why_abnormal" required placeholder="Ex. : onde T aplatie, onde U proéminente, QT long apparent..."></textarea>
        </div>

        <div class="ecg-tracing">
            <h3>Tracé 7 : Fibrillation auriculaire</h3>
            <img src="https://www.e-cardiogram.com/wp-content/uploads/2019/11/Fibrillation-atriale-rapide-ECG-Taboulet-1.jpg" alt="Fibrillation auriculaire">
            <label>Que signifie cette anomalie ?</label>
            <textarea name="afib_meaning" required placeholder="Ex. : rythme irrégulier sans onde P, activité auriculaire chaotique..."></textarea>
            <label>Pourquoi ce tracé n'est-il PAS normal ?</label>
            <textarea name="afib_why_abnormal" required placeholder="Ex. : absence d'onde P, QRS irrégulièrement irréguliers..."></textarea>
        </div>

        <button type="submit">Envoyer la formation</button>
    </form>

    <script>
        function allowDrop(ev) {
            ev.preventDefault();
        }

        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
        }

        function drop(ev) {
            ev.preventDefault();
            const data = ev.dataTransfer.getData("text");
            const electrode = document.getElementById(data);
            if (!electrode) return;

            const container = document.getElementById('mannequin-container');
            const rect = container.getBoundingClientRect();
            const x = ev.clientX - rect.left - (electrode.offsetWidth / 2);
            const y = ev.clientY - rect.top - (electrode.offsetHeight / 2);

            electrode.style.position = 'absolute';
            electrode.style.left = Math.max(0, x) + 'px';
            electrode.style.top  = Math.max(0, y) + 'px';
            electrode.style.margin = '0';

            container.appendChild(electrode);
        }

        const electrodes = document.getElementsByClassName('electrode');
        for (let el of electrodes) {
            el.addEventListener('dragstart', drag);
        }

        document.getElementById('ecgForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = {};
            const inputs = this.querySelectorAll('input[type="text"], textarea');
            inputs.forEach(input => {
                formData[input.name] = input.value.trim();
            });

            formData.placements = {};
            const containerWidth = document.getElementById('mannequin-container').offsetWidth;
            const containerHeight = document.getElementById('mannequin-container').offsetHeight;
            for (let el of electrodes) {
                if (el.style.position === 'absolute') {
                    const left = parseFloat(el.style.left) || 0;
                    const top = parseFloat(el.style.top) || 0;
                    formData.placements[el.id] = {
                        leftPercent: (left / containerWidth) * 100,
                        topPercent: (top / containerHeight) * 100
                    };
                }
            }

            const submissions = JSON.parse(localStorage.getItem('ecgSubmissions') || '[]');
            submissions.push({
                timestamp: new Date().toISOString(),
                data: formData
            });
            localStorage.setItem('ecgSubmissions', JSON.stringify(submissions));

            alert('Formation enregistrée ! Consultez admin.html pour voir les résultats.');
            this.reset();

            const sidebar = document.getElementById('electrodes');
            for (let el of electrodes) {
                el.style.position = '';
                el.style.left = '';
                el.style.top = '';
                sidebar.appendChild(el);
            }
        });
    </script>
</body>
</html>
